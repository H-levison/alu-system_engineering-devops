#!/usr/bin/env bash

#!/bin/bash

# Install Nginx if not already installed
if ! dpkg -l | grep -q nginx; then
    echo "Installing Nginx..."
    sudo apt update
    sudo apt install -y nginx
fi

# Ensure Nginx is started
echo "Starting Nginx..."
sudo systemctl start nginx

# Configure Nginx to listen on port 80
echo "Configuring Nginx to listen on port 80..."
sudo sed -i 's/listen 127.0.0.1:80;/listen 0.0.0.0:80;/' /etc/nginx/sites-available/default

# Open port 80 in the firewall if necessary
echo "Configuring firewall to allow traffic on port 80..."
sudo ufw allow 80/tcp

# Restart Nginx to apply the configuration changes
echo "Restarting Nginx..."
sudo systemctl restart nginx

# Verify Nginx is listening on port 80
echo "Verifying if Nginx is listening on port 80..."
sudo netstat -tuln | grep :80

# Output success message
echo "Nginx should now be listening on port 80."

